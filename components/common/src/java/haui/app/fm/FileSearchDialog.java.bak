package haui.app.fm;

import haui.components.JExDialog;
import haui.app.fm.FileInfoPanel;
import haui.util.AppProperties;

import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

/**
 * Module:      FileSearchDialog.java<br>
 *              $Source: $
 *<p>
 * Description: file search dialog.<br>
 *</p><p>
 * Created:     20.08.2004 by AE
 *</p><p>
 * @history     20.08.2004 AE: Created.<br>
 *</p><p>
 * Modification:<br>
 * $Log: $
 *</p><p>
 * @author      Andreas Eisenhauer
 *</p><p>
 * @version     v1.0, 2004; $Revision: $<br>
 *              $Header: $
 *</p><p>
 * @since       JDK1.2
 *</p>
 */
public class FileSearchDialog
  extends JExDialog
{
  BorderLayout m_borderLayoutMain = new BorderLayout();
  FileSearchPanel m_fileSearchPanel = null;

  public FileSearchDialog( Component frame, String title, boolean modal, String strAppName,
                           FileInfoPanel fip, AppProperties appProps)
  {
    super( frame, title, modal, strAppName);
    try
    {
      m_fileSearchPanel = new FileSearchPanel( fip, appProps, strAppName)
                          {
                            public boolean cancel()
                            {
                              boolean blCancel = super.cancel();
                              if( !blCancel)
                                FileSearchDialog.this.setVisible( false);
                              return blCancel;
                            }
                          };
      jbInit();
      pack();
      getRootPane().setDefaultButton( m_fileSearchPanel.getDeaultButton());
      AdpWindow adpWindow = new AdpWindow();
      this.addWindowListener( adpWindow);
    }
    catch(Exception e)
    {
      e.printStackTrace();
    }
  }

  private void jbInit()
    throws Exception
  {
    this.getContentPane().setLayout( m_borderLayoutMain);
    this.getContentPane().add( m_fileSearchPanel,  BorderLayout.CENTER);
  }

  class AdpWindow
    extends WindowAdapter
  {
    public void windowClosing( WindowEvent event)
    {
      Object object = event.getSource();
      if( object == FileSearchDialog.this)
      {
        closeDialog();
      }
    }
  }

  public void closeDialog()
  {
    m_fileSearchPanel.cancel();
    setVisible( false);
  }
}